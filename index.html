<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NutriScan AI - Smart Nutrition Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Firebase SDK for authentication -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #6B73FF 0%, #000DFF 100%);
        }
        .food-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .scan-animation {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(74, 144, 226, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(74, 144, 226, 0); }
            100% { box-shadow: 0 0 0 0 rgba(74, 144, 226, 0); }
        }
        .nutrition-bar {
            transition: width 0.5s ease-in-out;
        }
        .auth-modal {
            transition: all 0.3s ease;
            opacity: 0;
            visibility: hidden;
        }
        .auth-modal.active {
            opacity: 1;
            visibility: visible;
        }
        .auth-tab {
            transition: all 0.3s ease;
        }
        .auth-tab.active {
            border-bottom: 3px solid #3B82F6;
            color: #3B82F6;
        }
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Auth Modals -->
    <div id="authModal" class="auth-modal fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md mx-4">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold">Welcome to NutriScan</h3>
                    <button id="closeAuthModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="flex border-b mb-6">
                    <button id="loginTab" class="auth-tab active py-2 px-4 font-medium">Login</button>
                    <button id="registerTab" class="auth-tab py-2 px-4 font-medium">Register</button>
                </div>
                
                <!-- Login Form -->
                <div id="loginForm" class="space-y-4">
                    <div>
                        <label class="block text-gray-700 mb-2">Email</label>
                        <input type="email" id="loginEmail" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="your@email.com">
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-2">Password</label>
                        <input type="password" id="loginPassword" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="••••••••">
                    </div>
                    <button id="loginBtn" class="w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition">
                        Login
                    </button>
                    <div class="text-center text-sm text-gray-500 my-4">or continue with</div>
                    <div class="grid grid-cols-2 gap-4">
                        <button id="googleLogin" class="bg-white border border-gray-300 py-2 px-4 rounded-lg font-medium hover:bg-gray-50 transition flex items-center justify-center">
                            <i class="fab fa-google text-red-500 mr-2"></i> Google
                        </button>
                        <button id="facebookLogin" class="bg-white border border-gray-300 py-2 px-4 rounded-lg font-medium hover:bg-gray-50 transition flex items-center justify-center">
                            <i class="fab fa-facebook-f text-blue-600 mr-2"></i> Facebook
                        </button>
                        <button id="twitterLogin" class="bg-white border border-gray-300 py-2 px-4 rounded-lg font-medium hover:bg-gray-50 transition flex items-center justify-center">
                            <i class="fab fa-twitter text-blue-400 mr-2"></i> X/Twitter
                        </button>
                        <button id="instagramLogin" class="bg-white border border-gray-300 py-2 px-4 rounded-lg font-medium hover:bg-gray-50 transition flex items-center justify-center">
                            <i class="fab fa-instagram text-pink-500 mr-2"></i> Instagram
                        </button>
                    </div>
                </div>
                
                <!-- Register Form -->
                <div id="registerForm" class="space-y-4 hidden">
                    <div>
                        <label class="block text-gray-700 mb-2">Name</label>
                        <input type="text" id="registerName" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Your Name">
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-2">Email</label>
                        <input type="email" id="registerEmail" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="your@email.com">
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-2">Password</label>
                        <input type="password" id="registerPassword" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="••••••••">
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-2">Confirm Password</label>
                        <input type="password" id="registerConfirmPassword" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="••••••••">
                    </div>
                    <button id="registerBtn" class="w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition">
                        Create Account
                    </button>
                    <div class="text-center text-sm text-gray-500 my-4">or sign up with</div>
                    <div class="grid grid-cols-2 gap-4">
                        <button id="googleRegister" class="bg-white border border-gray-300 py-2 px-4 rounded-lg font-medium hover:bg-gray-50 transition flex items-center justify-center">
                            <i class="fab fa-google text-red-500 mr-2"></i> Google
                        </button>
                        <button id="facebookRegister" class="bg-white border border-gray-300 py-2 px-4 rounded-lg font-medium hover:bg-gray-50 transition flex items-center justify-center">
                            <i class="fab fa-facebook-f text-blue-600 mr-2"></i> Facebook
                        </button>
                        <button id="twitterRegister" class="bg-white border border-gray-300 py-2 px-4 rounded-lg font-medium hover:bg-gray-50 transition flex items-center justify-center">
                            <i class="fab fa-twitter text-blue-400 mr-2"></i> X/Twitter
                        </button>
                        <button id="instagramRegister" class="bg-white border border-gray-300 py-2 px-4 rounded-lg font-medium hover:bg-gray-50 transition flex items-center justify-center">
                            <i class="fab fa-instagram text-pink-500 mr-2"></i> Instagram
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-2 cursor-pointer" id="homeBtn">
                    <i class="fas fa-utensils text-2xl"></i>
                    <h1 class="text-2xl font-bold">NutriScan AI</h1>
                </div>
                <nav class="hidden md:flex space-x-6 items-center">
                    <div id="userDropdown" class="relative hidden">
                        <button id="userMenuButton" class="flex items-center space-x-2 focus:outline-none">
                            <img id="userAvatar" src="https://via.placeholder.com/40" alt="User" class="w-8 h-8 rounded-full">
                            <span id="userName" class="font-medium">John Doe</span>
                            <i class="fas fa-chevron-down text-sm"></i>
                        </button>
                        <div id="userDropdownMenu" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 hidden">
                            <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-100" id="scanNavBtn">Scan Food</a>
                            <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-100" id="calculatorNavBtn">Calorie Calculator</a>
                            <a href="#" id="logoutBtn" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Logout</a>
                        </div>
                    </div>
                    <button id="authButton" class="border-2 border-white px-4 py-1 rounded-full font-medium hover:bg-white hover:text-blue-600 transition">
                        Login / Register
                    </button>
                </nav>
                <button class="md:hidden text-xl">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Home Page -->
    <div id="homePage" class="page active">
        <!-- Hero Section -->
        <section class="gradient-bg text-white py-16">
            <div class="container mx-auto px-4 flex flex-col md:flex-row items-center">
                <div class="md:w-1/2 mb-10 md:mb-0">
                    <h2 class="text-4xl md:text-5xl font-bold mb-4">Smart Nutrition Analysis with AI</h2>
                    <p class="text-xl mb-8">Scan your food, get instant calorie counts, and detailed nutritional breakdown powered by artificial intelligence.</p>
                    <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                        <button id="scanFoodBtn" class="bg-white text-blue-600 px-6 py-3 rounded-full font-bold hover:bg-gray-100 transition flex items-center justify-center">
                            <i class="fas fa-camera mr-2"></i> Scan Food Now
                        </button>
                        <button id="calculatorBtn" class="border-2 border-white px-6 py-3 rounded-full font-bold hover:bg-white hover:text-blue-600 transition flex items-center justify-center">
                            <i class="fas fa-calculator mr-2"></i> Calorie Calculator
                        </button>
                    </div>
                </div>
                <div class="md:w-1/2 flex justify-center">
                    <div class="relative">
                        <img src="https://images.unsplash.com/photo-1546069901-ba9599a7e63c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=880&q=80" 
                             alt="Healthy Food" class="rounded-xl shadow-2xl w-full max-w-md">
                        <div class="absolute -bottom-5 -right-5 bg-white p-4 rounded-xl shadow-lg">
                            <div class="text-center">
                                <p class="text-gray-500 text-sm">Estimated</p>
                                <p class="text-2xl font-bold text-blue-600">350 kcal</p>
                                <div class="flex justify-center space-x-1 mt-1">
                                    <span class="w-2 h-2 rounded-full bg-green-500"></span>
                                    <span class="w-2 h-2 rounded-full bg-yellow-500"></span>
                                    <span class="w-2 h-2 rounded-full bg-red-500"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="py-16 bg-white">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl font-bold text-center mb-12">How It Works</h2>
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="bg-gray-50 p-6 rounded-xl text-center">
                        <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-camera text-blue-600 text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2">1. Scan Your Food</h3>
                        <p class="text-gray-600">Use your camera or upload an image of your meal for AI analysis.</p>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-xl text-center">
                        <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-brain text-blue-600 text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2">2. AI Processing</h3>
                        <p class="text-gray-600">Our advanced AI identifies food items and calculates nutritional values.</p>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-xl text-center">
                        <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-chart-pie text-blue-600 text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2">3. Get Results</h3>
                        <p class="text-gray-600">Receive detailed calorie count and nutrition breakdown instantly.</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Scanner Page -->
    <div id="scanPage" class="page">
        <section class="py-16 bg-gray-50">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl font-bold text-center mb-12">Food Scanner</h2>
                <div class="bg-white rounded-xl shadow-lg p-6 max-w-2xl mx-auto">
                    <div id="scannerContainer" class="relative">
                        <div id="permissionRequest" class="text-center p-8">
                            <i class="fas fa-camera text-5xl text-blue-500 mb-4"></i>
                            <h3 class="text-xl font-bold mb-2">Enable Camera Access</h3>
                            <p class="text-gray-600 mb-6">To scan your food, we need access to your camera. Your privacy is important - images are processed locally when possible.</p>
                            <button id="requestCamera" class="bg-blue-600 text-white px-6 py-3 rounded-full font-bold hover:bg-blue-700 transition">
                                Allow Camera Access
                            </button>
                            <p class="text-sm text-gray-500 mt-4">Or <button id="uploadInstead" class="text-blue-600 font-medium">upload an image</button> instead</p>
                        </div>
                        
                        <div id="cameraView" class="hidden">
                            <video id="cameraFeed" autoplay playsinline class="w-full h-auto rounded-lg mb-4"></video>
                            <div class="flex justify-center space-x-4">
                                <button id="captureBtn" class="scan-animation bg-blue-600 text-white w-16 h-16 rounded-full flex items-center justify-center">
                                    <i class="fas fa-camera text-2xl"></i>
                                </button>
                                <button id="switchCamera" class="bg-gray-200 text-gray-700 w-12 h-12 rounded-full flex items-center justify-center">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div id="uploadView" class="hidden">
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center mb-4">
                                <i class="fas fa-cloud-upload-alt text-4xl text-blue-500 mb-3"></i>
                                <p class="font-medium mb-2">Drag & drop food image here</p>
                                <p class="text-gray-500 text-sm mb-4">or</p>
                                <label for="fileUpload" class="bg-blue-600 text-white px-4 py-2 rounded-lg font-medium cursor-pointer hover:bg-blue-700 transition">
                                    Select from Gallery
                                </label>
                                <input type="file" id="fileUpload" accept="image/*" class="hidden">
                            </div>
                        </div>
                        
                        <div id="previewView" class="hidden">
                            <img id="previewImage" src="" class="w-full h-auto rounded-lg mb-4">
                            <div class="flex justify-center space-x-4">
                                <button id="analyzeBtn" class="bg-blue-600 text-white px-6 py-3 rounded-full font-bold hover:bg-blue-700 transition">
                                    <i class="fas fa-search mr-2"></i> Analyze Food
                                </button>
                                <button id="retakeBtn" class="bg-gray-200 text-gray-700 px-4 py-3 rounded-full font-medium hover:bg-gray-300 transition">
                                    <i class="fas fa-redo mr-2"></i> Retake
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Food Analysis Section -->
        <section class="py-16 bg-white">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl font-bold text-center mb-12">Food Analysis</h2>
                <div id="analysisResults" class="hidden bg-white rounded-xl shadow-lg p-6 max-w-3xl mx-auto">
                    <!-- Analysis content remains the same -->
                </div>
                
                <div id="noAnalysis" class="bg-white rounded-xl shadow-lg p-12 text-center max-w-3xl mx-auto">
                    <i class="fas fa-search text-5xl text-gray-300 mb-4"></i>
                    <h3 class="text-xl font-bold mb-2">No Analysis Yet</h3>
                    <p class="text-gray-600 mb-6">Scan or upload a food image to see detailed nutritional analysis powered by AI.</p>
                    <button id="startScan2" class="bg-blue-600 text-white px-6 py-3 rounded-full font-bold hover:bg-blue-700 transition">
                        <i class="fas fa-camera mr-2"></i> Scan Food Now
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- Calculator Page -->
    <div id="calculatorPage" class="page">
        <section class="py-16 bg-white">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl font-bold text-center mb-12">Calorie Calculator</h2>
                <div class="bg-gray-50 rounded-xl shadow-lg p-6 max-w-3xl mx-auto">
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-xl font-bold mb-4">Personal Information</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-gray-700 mb-2">Gender</label>
                                    <div class="flex space-x-4">
                                        <label class="inline-flex items-center">
                                            <input type="radio" name="gender" value="male" checked class="form-radio text-blue-600">
                                            <span class="ml-2">Male</span>
                                        </label>
                                        <label class="inline-flex items-center">
                                            <input type="radio" name="gender" value="female" class="form-radio text-blue-600">
                                            <span class="ml-2">Female</span>
                                        </label>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-gray-700 mb-2">Age</label>
                                    <input type="number" id="age" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" min="10" max="120" value="30">
                                </div>
                                <div>
                                    <label class="block text-gray-700 mb-2">Height (cm)</label>
                                    <input type="number" id="height" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" min="100" max="250" value="170">
                                </div>
                                <div>
                                    <label class="block text-gray-700 mb-2">Weight (kg)</label>
                                    <input type="number" id="weight" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" min="30" max="300" value="70">
                                </div>
                                <div>
                                    <label class="block text-gray-700 mb-2">Activity Level</label>
                                    <select id="activity" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option value="1.2">Sedentary (little or no exercise)</option>
                                        <option value="1.375">Lightly active (light exercise 1-3 days/week)</option>
                                        <option value="1.55" selected>Moderately active (moderate exercise 3-5 days/week)</option>
                                        <option value="1.725">Very active (hard exercise 6-7 days/week)</option>
                                        <option value="1.9">Extra active (very hard exercise & physical job)</option>
                                    </select>
                                </div>
                                <button id="calculateBtn" class="w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition">
                                    Calculate Daily Calories
                                </button>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold mb-4">Your Results</h3>
                            <div id="resultsContainer" class="bg-white p-6 rounded-lg shadow-inner">
                                <div class="text-center py-8">
                                    <i class="fas fa-calculator text-4xl text-gray-300 mb-3"></i>
                                    <p class="text-gray-500">Enter your details and click "Calculate" to see your daily calorie needs</p>
                                </div>
                                <div id="results" class="hidden space-y-6">
                                    <div>
                                        <h4 class="font-medium text-gray-700 mb-2">Maintenance Calories</h4>
                                        <div class="bg-blue-100 rounded-full h-4">
                                            <div id="maintenanceBar" class="nutrition-bar bg-blue-600 rounded-full h-4" style="width: 0%"></div>
                                        </div>
                                        <p id="maintenanceCal" class="text-right text-sm font-medium mt-1">0 kcal/day</p>
                                    </div>
                                    <div>
                                        <h4 class="font-medium text-gray-700 mb-2">Weight Loss (0.5kg/week)</h4>
                                        <div class="bg-green-100 rounded-full h-4">
                                            <div id="lossBar" class="nutrition-bar bg-green-500 rounded-full h-4" style="width: 0%"></div>
                                        </div>
                                        <p id="lossCal" class="text-right text-sm font-medium mt-1">0 kcal/day</p>
                                    </div>
                                    <div>
                                        <h4 class="font-medium text-gray-700 mb-2">Weight Gain (0.5kg/week)</h4>
                                        <div class="bg-yellow-100 rounded-full h-4">
                                            <div id="gainBar" class="nutrition-bar bg-yellow-500 rounded-full h-4" style="width: 0%"></div>
                                        </div>
                                        <p id="gainCal" class="text-right text-sm font-medium mt-1">0 kcal/day</p>
                                    </div>
                                    <div class="pt-4">
                                        <h4 class="font-bold text-gray-800 mb-2">Macronutrient Distribution</h4>
                                        <div class="grid grid-cols-3 gap-4 text-center">
                                            <div class="bg-blue-50 p-3 rounded-lg">
                                                <div class="text-blue-600 font-bold text-xl mb-1" id="proteinPct">30%</div>
                                                <div class="text-sm text-gray-600">Protein</div>
                                            </div>
                                            <div class="bg-green-50 p-3 rounded-lg">
                                                <div class="text-green-600 font-bold text-xl mb-1" id="carbsPct">40%</div>
                                                <div class="text-sm text-gray-600">Carbs</div>
                                            </div>
                                            <div class="bg-yellow-50 p-3 rounded-lg">
                                                <div class="text-yellow-600 font-bold text-xl mb-1" id="fatsPct">30%</div>
                                                <div class="text-sm text-gray-600">Fats</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <i class="fas fa-utensils mr-2"></i> NutriScan AI
                    </h3>
                    <p class="text-gray-400">Smart nutrition analysis powered by artificial intelligence for healthier eating habits.</p>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Features</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Food Scanner</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Calorie Calculator</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Nutrition Analysis</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Meal Planning</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Resources</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Blog</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Nutrition Guides</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Healthy Recipes</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">FAQ</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Connect</h4>
                    <div class="flex space-x-4 mb-4">
                        <a href="#" class="w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center hover:bg-blue-600 transition">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center hover:bg-blue-400 transition">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center hover:bg-pink-600 transition">
                            <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                    <p class="text-gray-400">support@nutriscan.ai</p>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2023 NutriScan AI. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyD3vJ8Q3j5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5",
            authDomain: "nutriscan-ai.firebaseapp.com",
            projectId: "nutriscan-ai",
            storageBucket: "nutriscan-ai.appspot.com",
            messagingSenderId: "123456789012",
            appId: "1:123456789012:web:5Q5Q5Q5Q5Q5Q5Q5Q5Q5Q5"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // Auth Providers
        const googleProvider = new firebase.auth.GoogleAuthProvider();
        const facebookProvider = new firebase.auth.FacebookAuthProvider();
        const twitterProvider = new firebase.auth.TwitterAuthProvider();
        
        // Page Navigation
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
        }

        // Auth State Listener
        auth.onAuthStateChanged((user) => {
            if (user) {
                // User is signed in
                updateUserUI(user);
                document.getElementById('userDropdown').classList.remove('hidden');
                document.getElementById('authButton').classList.add('hidden');
            } else {
                // User is signed out
                document.getElementById('userDropdown').classList.add('hidden');
                document.getElementById('authButton').classList.remove('hidden');
                showPage('homePage');
            }
        });

        // Update UI based on user state
        function updateUserUI(user) {
            // Set user name
            const displayName = user.displayName || "User";
            document.getElementById('userName').textContent = displayName.split(' ')[0]; // First name only
            
            // Set user avatar
            const avatar = user.photoURL || "https://via.placeholder.com/40";
            document.getElementById('userAvatar').src = avatar;
        }

        // Auth Modal Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const authModal = document.getElementById('authModal');
            const closeAuthModal = document.getElementById('closeAuthModal');
            const authButton = document.getElementById('authButton');
            const loginTab = document.getElementById('loginTab');
            const registerTab = document.getElementById('registerTab');
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            
            // Show auth modal
            authButton.addEventListener('click', () => {
                authModal.classList.add('active');
            });
            
            // Close auth modal
            closeAuthModal.addEventListener('click', () => {
                authModal.classList.remove('active');
            });
            
            // Switch to login tab
            loginTab.addEventListener('click', () => {
                loginTab.classList.add('active');
                registerTab.classList.remove('active');
                loginForm.classList.remove('hidden');
                registerForm.classList.add('hidden');
            });
            
            // Switch to register tab
            registerTab.addEventListener('click', () => {
                registerTab.classList.add('active');
                loginTab.classList.remove('active');
                registerForm.classList.remove('hidden');
                loginForm.classList.add('hidden');
            });
            
            // Email/Password Login
            document.getElementById('loginBtn').addEventListener('click', () => {
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                
                auth.signInWithEmailAndPassword(email, password)
                    .then((userCredential) => {
                        // Signed in
                        authModal.classList.remove('active');
                        showPage('homePage');
                    })
                    .catch((error) => {
                        alert(error.message);
                    });
            });
            
            // Email/Password Registration
            document.getElementById('registerBtn').addEventListener('click', () => {
                const name = document.getElementById('registerName').value;
                const email = document.getElementById('registerEmail').value;
                const password = document.getElementById('registerPassword').value;
                const confirmPassword = document.getElementById('registerConfirmPassword').value;
                
                if (password !== confirmPassword) {
                    alert("Passwords don't match!");
                    return;
                }
                
                auth.createUserWithEmailAndPassword(email, password)
                    .then((userCredential) => {
                        // Update user profile with name
                        return userCredential.user.updateProfile({
                            displayName: name
                        });
                    })
                    .then(() => {
                        authModal.classList.remove('active');
                        showPage('homePage');
                    })
                    .catch((error) => {
                        alert(error.message);
                    });
            });
            
            // Social Login - Google
            document.getElementById('googleLogin').addEventListener('click', () => {
                socialLogin(googleProvider);
            });
            document.getElementById('googleRegister').addEventListener('click', () => {
                socialLogin(googleProvider);
            });
            
            // Social Login - Facebook
            document.getElementById('facebookLogin').addEventListener('click', () => {
                socialLogin(facebookProvider);
            });
            document.getElementById('facebookRegister').addEventListener('click', () => {
                socialLogin(facebookProvider);
            });
            
            // Social Login - Twitter
            document.getElementById('twitterLogin').addEventListener('click', () => {
                socialLogin(twitterProvider);
            });
            document.getElementById('twitterRegister').addEventListener('click', () => {
                socialLogin(twitterProvider);
            });
            
            // Social Login - Instagram (simulated)
            document.getElementById('instagramLogin').addEventListener('click', () => {
                alert('Instagram login would be implemented with their API');
            });
            document.getElementById('instagramRegister').addEventListener('click', () => {
                alert('Instagram login would be implemented with their API');
            });
            
            // Logout
            document.getElementById('logoutBtn').addEventListener('click', () => {
                auth.signOut().then(() => {
                    showPage('homePage');
                }).catch((error) => {
                    alert(error.message);
                });
            });
            
            // User dropdown
            const userMenuButton = document.getElementById('userMenuButton');
            const userDropdownMenu = document.getElementById('userDropdownMenu');
            
            userMenuButton.addEventListener('click', () => {
                userDropdownMenu.classList.toggle('hidden');
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (!userMenuButton.contains(e.target) && !userDropdownMenu.contains(e.target)) {
                    userDropdownMenu.classList.add('hidden');
                }
            });
            
            // Social login function
            function socialLogin(provider) {
                auth.signInWithPopup(provider)
                    .then((result) => {
                        // Signed in
                        authModal.classList.remove('active');
                        showPage('homePage');
                    })
                    .catch((error) => {
                        alert(error.message);
                    });
            }
            
            // Navigation buttons
            document.getElementById('homeBtn').addEventListener('click', () => {
                showPage('homePage');
            });
            
            document.getElementById('scanFoodBtn').addEventListener('click', () => {
                if (auth.currentUser) {
                    showPage('scanPage');
                } else {
                    authModal.classList.add('active');
                }
            });
            
            document.getElementById('calculatorBtn').addEventListener('click', () => {
                if (auth.currentUser) {
                    showPage('calculatorPage');
                } else {
                    authModal.classList.add('active');
                }
            });
            
            document.getElementById('scanNavBtn').addEventListener('click', () => {
                showPage('scanPage');
                userDropdownMenu.classList.add('hidden');
            });
            
            document.getElementById('calculatorNavBtn').addEventListener('click', () => {
                showPage('calculatorPage');
                userDropdownMenu.classList.add('hidden');
            });
            
            document.getElementById('startScan2').addEventListener('click', () => {
                showPage('scanPage');
            });
            
            // Calorie Calculator Functionality
            document.getElementById('calculateBtn').addEventListener('click', calculateCalories);
            
            function calculateCalories() {
                const gender = document.querySelector('input[name="gender"]:checked').value;
                const age = parseFloat(document.getElementById('age').value);
                const height = parseFloat(document.getElementById('height').value);
                const weight = parseFloat(document.getElementById('weight').value);
                const activity = parseFloat(document.getElementById('activity').value);
                
                // Calculate BMR (Basal Metabolic Rate)
                let bmr;
                if (gender === 'male') {
                    bmr = 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);
                } else {
                    bmr = 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
                }
                
                // Calculate TDEE (Total Daily Energy Expenditure)
                const maintenance = Math.round(bmr * activity);
                const loss = maintenance - 500;
                const gain = maintenance + 500;
                
                // Update UI
                document.getElementById('maintenanceCal').textContent = maintenance + ' kcal/day';
                document.getElementById('lossCal').textContent = loss + ' kcal/day';
                document.getElementById('gainCal').textContent = gain + ' kcal/day';
                
                // Animate bars
                setTimeout(() => {
                    document.getElementById('maintenanceBar').style.width = '100%';
                    document.getElementById('lossBar').style.width = Math.min(100, (loss / maintenance) * 100) + '%';
                    document.getElementById('gainBar').style.width = Math.min(100, (gain / maintenance) * 100) + '%';
                }, 100);
                
                // Show results
                document.getElementById('results').classList.remove('hidden');
            }
            
            // Scanner Functionality
            const permissionRequest = document.getElementById('permissionRequest');
            const cameraView = document.getElementById('cameraView');
            const uploadView = document.getElementById('uploadView');
            const previewView = document.getElementById('previewView');
            const cameraFeed = document.getElementById('cameraFeed');
            const fileUpload = document.getElementById('fileUpload');
            const previewImage = document.getElementById('previewImage');
            const analysisResults = document.getElementById('analysisResults');
            const noAnalysis = document.getElementById('noAnalysis');
            
            let stream = null;
            
            // Request camera access
            document.getElementById('requestCamera').addEventListener('click', async () => {
                try {
                    stream = await navigator.mediaDevices.getUserMedia({ 
                        video: { facingMode: 'environment' } 
                    });
                    cameraFeed.srcObject = stream;
                    permissionRequest.classList.add('hidden');
                    cameraView.classList.remove('hidden');
                } catch (err) {
                    console.error("Camera access denied:", err);
                    alert("Could not access the camera. Please check your permissions.");
                }
            });
            
            // Switch to upload view
            document.getElementById('uploadInstead').addEventListener('click', () => {
                permissionRequest.classList.add('hidden');
                uploadView.classList.remove('hidden');
            });
            
            // Handle file upload
            fileUpload.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        previewImage.src = event.target.result;
                        uploadView.classList.add('hidden');
                        previewView.classList.remove('hidden');
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            // Capture photo
            document.getElementById('captureBtn').addEventListener('click', () => {
                const canvas = document.createElement('canvas');
                canvas.width = cameraFeed.videoWidth;
                canvas.height = cameraFeed.videoHeight;
                canvas.getContext('2d').drawImage(cameraFeed, 0, 0);
                
                previewImage.src = canvas.toDataURL('image/png');
                cameraView.classList.add('hidden');
                previewView.classList.remove('hidden');
                
                // Stop camera stream
                if (stream) {
                    stream.getTracks().forEach(track => track.stop());
                }
            });
            
            // Switch camera (front/back)
            document.getElementById('switchCamera').addEventListener('click', async () => {
                if (stream) {
                    stream.getTracks().forEach(track => track.stop());
                    
                    try {
                        const currentFacingMode = stream.getVideoTracks()[0].getSettings().facingMode;
                        const newFacingMode = currentFacingMode === 'user' ? 'environment' : 'user';
                        
                        stream = await navigator.mediaDevices.getUserMedia({ 
                            video: { facingMode: newFacingMode } 
                        });
                        cameraFeed.srcObject = stream;
                    } catch (err) {
                        console.error("Error switching camera:", err);
                    }
                }
            });
            
            // Retake photo
            document.getElementById('retakeBtn').addEventListener('click', () => {
                previewView.classList.add('hidden');
                permissionRequest.classList.remove('hidden');
            });
            
            // Analyze food (simulated)
            document.getElementById('analyzeBtn').addEventListener('click', () => {
                // In a real app, this would send the image to your backend for analysis
                previewView.classList.add('hidden');
                analysisResults.classList.remove('hidden');
                noAnalysis.classList.add('hidden');
                
                // Simulate analysis with sample data
                document.getElementById('foodName').textContent = "Apple";
                document.getElementById('foodCalories').textContent = "95 kcal";
                document.getElementById('caloriesValue').textContent = "95";
                document.getElementById('proteinValue').textContent = "0.5g";
                document.getElementById('carbsValue').textContent = "25g";
                document.getElementById('fatsValue').textContent = "0.3g";
                document.getElementById('fiberValue').textContent = "4g";
                document.getElementById('vitaminC').textContent = "14% DV";
                document.getElementById('potassium').textContent = "6% DV";
                document.getElementById('vitaminK').textContent = "5% DV";
                document.getElementById('manganese').textContent = "4% DV";
                document.getElementById('aiInsights').textContent = "Apples are a good source of fiber and vitamin C. They contain polyphenols, which may have numerous health benefits. Eating apples may help with weight loss, heart health, and lowering the risk of diabetes.";
            });
        });
    </script>
<p style="border-radius: 8px; text-align: center; font-size: 12px; color: #fff; margin-top: 16px;position: fixed; left: 8px; bottom: 8px; z-index: 10; background: rgba(0, 0, 0, 0.8); padding: 4px 8px;">Made with <img src="https://enzostvs-deepsite.hf.space/logo.svg" alt="DeepSite Logo" style="width: 16px; height: 16px; vertical-align: middle;display:inline-block;margin-right:3px;filter:brightness(0) invert(1);"><a href="https://enzostvs-deepsite.hf.space" style="color: #fff;text-decoration: underline;" target="_blank" >DeepSite</a> - 🧬 <a href="https://enzostvs-deepsite.hf.space?remix=girollllllhhxh/cal-ai" style="color: #fff;text-decoration: underline;" target="_blank" >Remix</a></p></body>
</html>